/* ============================================================
   Base Icon Container
   ============================================================ */

.future-hause-icon {
  width: 200px;
  height: 200px;
  position: relative;
  transform-origin: center;
  will-change: transform, opacity;
}

/* ============================================================
   SVG TRANSFORM CONTEXT (CRITICAL FIX)
   ============================================================ */

.outer-ring,
.face-geometry,
.left-eye,
.right-eye {
  transform-box: fill-box;
  transform-origin: center;
}

/* ============================================================
   STATE: pulse-slow (idle)
   ============================================================ */

@keyframes pulse-ring {
  0%, 100% {
    transform: scale(1);
    opacity: 0.9;
  }
  50% {
    transform: scale(1.03);
    opacity: 1;
  }
}

@keyframes fade-subtle {
  0%, 100% { opacity: 0.9; }
  50% { opacity: 1; }
}

.state-pulse-slow .outer-ring {
  animation: pulse-ring 3s ease-in-out infinite;
}

.state-pulse-slow .face-geometry {
  animation: fade-subtle 3s ease-in-out infinite;
}

/* ============================================================
   STATE: spin (collecting)
   ============================================================ */

@keyframes spin-ring {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.state-spin .outer-ring {
  animation: spin-ring 4s linear infinite;
}

/* ============================================================
   STATE: glow (done)
   ============================================================ */

@keyframes glow-eyes {
  to {
    opacity: 1;
    filter: drop-shadow(0 0 8px currentColor);
  }
}

.state-glow .left-eye,
.state-glow .right-eye {
  animation: glow-eyes 1.5s ease-out forwards;
}

.state-glow .outer-ring {
  filter: drop-shadow(0 0 12px rgba(255, 255, 255, 0.6));
  transition: filter 1.5s ease-out;
}

/* ============================================================
   STATE: shake (error) — FIXED TARGET
   ============================================================ */

@keyframes shake-horizontal {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
  20%, 40%, 60%, 80% { transform: translateX(3px); }
}

.state-shake {
  animation: shake-horizontal 0.4s ease-in-out;
}

/* ============================================================
   STATE: slide-in (new signal) — FIXED TARGET
   ============================================================ */

@keyframes slide-from-top {
  from {
    transform: translateY(-20px);
    opacity: 0.5;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.state-slide-in {
  animation: slide-from-top 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ============================================================
   STATE: dim (no change) — FIXED TARGET
   ============================================================ */

.state-dim {
  opacity: 0.4;
  transition: opacity 0.8s ease-out;
}

/* ============================================================
   OPTIONAL: reset (safe transition)
   ============================================================ */

.state-reset * {
  animation: none !important;
  filter: none !important;
  opacity: 1;
}
/* Enhanced glow state - amplify filter effects */
.state-glow .outer-ring circle:first-child {
  stroke-width: 8;
  opacity: 0.4;
}

.state-glow .left-eye ellipse:first-child,
.state-glow .right-eye ellipse:first-child {
  opacity: 0.7;
}

/* Sparkle subtle pulse during idle */
.state-pulse-slow .sparkles {
  animation: sparkle-twinkle 4s ease-in-out infinite;
}

@keyframes sparkle-twinkle {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

/* Dim state - reduce filter intensity */
.state-dim .outer-ring circle:first-child {
  opacity: 0.1;
}
